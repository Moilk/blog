---
layout: post
title: Gradle入门
tags:  [android,gradle]
categories: [android开发]
author: Moilk
excerpt: "Android Studio采用新的构建系统gradle"
---
Gradle是一个基于Ant和Maven概念的项目自动化建构工具。它使用一种基于Groovy的语言DSL来声明项目设置，抛弃了基于XML的各种繁琐配置。使用gradle使得资源和代码的重用变得更加简单。

### 安卓构建系统
安卓构建系统是用来构建、测试、运行以及打包app的工具箱，它可以在as菜单里边作为一个集成的工具使用，也可以在命令行中单独运行。其主要功能如下所示：

* 定制、配置以及拓展构建过程
* 在相同的项目和模块下，为app生成不同的apk
* 代码和资源的跨源集复用
> 源集: 一组被一起编译一起执行的源文件,as中有两个标准源集:main和test。main源集包含产品源代码，也就是要编译打包成jar的部分。test源集包含单元测试源代码，编译后用JUnit 或TestNG执行。  
构建过程涉及很多工具以及生成中间文件的操作，而且具有可配置和可拓展性，因此它的内部操作很难以理解。下图描绘了构建涉及的工具和操作:  
![build.png](http://duras.wang/Blog/assets/images/build.png)

### build基础配置
Android Studio项目包含一个顶级的build文件，同时每个module包含一个build文件，名字均为build.gradle。在大多数情况下，我们只需要编辑模块的build.gradle。如下所示为一个app module的build文件：

```grooxy
// 添加gradle插件，声明是application
apply plugin: 'com.android.application'

// 在
android {
    // 编译SDK的版本
    compileSdkVersion 23
    // build tools的版本
    buildToolsVersion "23.0.0"

    defaultConfig {
        // 应用的包名
        applicationId "com.moilk.calculator"
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            // 是否进行混淆
            minifyEnabled false
            // 混淆文件的位置 默认混淆文件+用户混淆文件
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    // 编译libs目录下的所有jar包
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:23.0.1'
}
```